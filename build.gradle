/*
 * This build file was auto generated by running the Gradle 'init' task
 * by 'xieke' at '16-7-12 上午10:04' with Gradle 2.14
 *
 * This generated file contains a sample Java project to get you started.
 * For more details take a look at the Java Quickstart chapter in the Gradle
 * user guide available at https://docs.gradle.org/2.14/userguide/tutorial_java_projects.html
 */
 
 /** tomcat start **/
buildscript {
    repositories {
        mavenCentral()
    }
 
//    dependencies {
        //classpath 'com.bmuschko:gradle-tomcat-plugin:2.1'
  //      classpath 'com.coders-kitchen:compileonlyplugin:1.0.0'
    //}
}

// Apply the java plugin to add support for Java
apply plugin: 'java'

apply plugin: 'war'
//apply plugin: 'jetty'
//apply plugin: 'eclipse'
//apply plugin: 'compileOnly'
//apply plugin: 'tomcat' //apply plugin: 'com.bmuschko.tomcat'
//apply plugin: 'com.bmuschko.tomcat-base'
//
//project.webAppDirName = "src/main/webapp"
//
//    war {
//		archiveName 'ROOT.war'
//    }
    
//
sourceCompatibility=1.8
targetCompatibility =1.8

sourceSets {
    main {
    	java{
			srcDir 'src/main/java'
			output.classesDir 'src/main/webapp/WEB-INF/classes'
		}
        resources {
            srcDir 'src/main/java'
       	    output.resourcesDir 'src/main/webapp/WEB-INF/classes'
        }
    }
}

// In this section you declare where to find the dependencies of your project
repositories {

//	Use 'jcenter' for resolving your dependencies.
//	You can declare any Maven/Ivy/file repository here.
//	http://mvnrepository.com
    jcenter()
	//mavenCentral()
}

tasks.withType(JavaCompile) {  
    options.encoding = "UTF-8"  
}


// In this section you declare the dependencies for your production and test code
dependencies {
//	providedRuntime 'javax.servlet:jsp-api:2.0'
//	providedRuntime 'javax.servlet:servlet-api:2.5'
//	The production code uses the SLF4J logging API at compile time

    compile group: 'javax.servlet', name: 'javax.servlet-api', version: '3.0.1'
    compile group: 'org.apache.tomcat', name: 'tomcat-jsp-api', version: '8.0.35'
    compile group: 'org.apache.tomcat', name: 'tomcat-catalina', version: '8.0.35'
    compile group: 'org.apache.tomcat', name: 'tomcat-jdbc', version: '8.0.35'
//  compileOnly group: 'org.apache.tomcat', name: 'tomcat-jasper', version: '8.0.35'
//  compileOnly group: 'org.apache.tomcat', name: 'tomcat-coyote', version: '8.0.35'
//  compileOnly group: 'org.apache.tomcat', name: 'tomcat-dbcp', version: '8.0.35'
    
    compile group: 'commons-lang', name: 'commons-lang', version: '2.6'
    compile group: 'commons-codec', name: 'commons-codec', version: '1.10'
    compile group: 'commons-io', name: 'commons-io', version: '2.5'
    compile group: 'commons-collections', name: 'commons-collections', version: '3.2.2'
    
    compile group: 'org.apache.commons', name: 'commons-pool2', version: '2.4.2'  
    compile group: 'org.apache.commons', name: 'commons-lang3', version: '3.4'
    compile group: 'org.apache.commons', name: 'commons-compress', version: '1.6'
    
    compile group: 'org.apache.httpcomponents', name: 'httpclient', version: '4.5.2'
    compile group: 'org.apache.poi', name: 'poi', version: '3.15-beta2'
    
    compile group: 'org.springframework', name: 'spring-context', version: '3.0.7.RELEASE'
    compile group: 'org.springframework', name: 'spring-web', version: '3.0.7.RELEASE'
    compile group: 'org.springframework', name: 'spring-test', version: '3.0.7.RELEASE'
    compile group: 'org.springframework', name: 'spring-aop', version: '3.0.7.RELEASE'
    compile group: 'org.springframework', name: 'spring-core', version: '3.0.7.RELEASE'
    compile group: 'org.springframework', name: 'spring-beans', version: '3.0.7.RELEASE'



    compile group: 'org.mongodb', name: 'mongo-java-driver', version: '3.2.2'
    compile group: 'org.bouncycastle', name: 'bcprov-jdk15on', version: '1.54'
    compile group: 'org.jpos', name: 'jpos', version: '2.0.6'
    compile group: 'org.quartz-scheduler', name: 'quartz', version: '2.2.3'
	compile group: 'org.tmatesoft.svnkit', name: 'svnkit', version: '1.8.12'
	compile group: 'org.xerial', name: 'sqlite-jdbc', version: '3.8.11.2' 
	compile group: 'org.slf4j', name: 'slf4j-api', version: '1.7.21' 
    
    //compile group: 'log4j', name: 'log4j', version: '1.2.17'  
    compile group: 'mysql', name: 'mysql-connector-java', version: '5.1.37'  
    compile group: 'junit', name: 'junit', version: '4.12'
    compile group: 'redis.clients', name: 'jedis', version: '2.8.1'  
    compile group: 'javax.mail', name: 'mail', version: '1.5.0-b01'
 	compile group: 'javax.servlet', name: 'jstl', version: '1.2'
	compile group: 'javax.websocket', name: 'javax.websocket-api', version: '1.1'
    
    compile group: 'com.servlets', name: 'cos', version: '05Nov2002'
    compile group: 'com.fasterxml.jackson.core', name: 'jackson-annotations', version: '2.8.0'
    compile group: 'com.fasterxml.jackson.core', name: 'jackson-databind', version: '2.8.0'
    compile group: 'com.caucho', name: 'hessian', version: '4.0.38'
    compile group: 'net.dongliu', name: 'apk-parser', version: '2.1.6'
    compile group: 'avalon-framework', name: 'avalon-framework-api', version: '4.2.0'
    compile group: 'org.apache.poi', name: 'poi', version: '3.8'
    compile group: 'org.apache.poi', name: 'poi-ooxml', version: '3.8'
    compile group: 'jexcelapi', name: 'jxl', version: '2.6'
    compile group: 'com.google.guava', name: 'guava', version: '20.0'
// https://mvnrepository.com/artifact/commons-httpclient/commons-httpclient
compile group: 'commons-httpclient', name: 'commons-httpclient', version: '3.1'
	compile group: 'org.apache.httpcomponents',name:'httpasyncclient',version:'4.1.3'
    //compile group: 'org.apache.zookeeper', name: 'zookeeper', version: '3.4.9'
    compile ('org.apache.zookeeper:zookeeper:3.4.9'){
     exclude group: 'org.slf4j'
    }
    compile group: 'io.netty', name: 'netty-all', version: '4.1.9.Final'
    compile group: 'com.typesafe', name: 'config', version: '1.3.1'
    compile group: 'com.google.guava', name: 'guava', version: '20.0'
    compile group: 'org.apache.curator', name: 'curator-framework', version: '2.11.1'
    compile group: 'org.apache.curator', name: 'curator-recipes', version: '2.11.1'
    compile group: 'org.apache.curator', name: 'curator-client', version: '2.11.1'
    compile group: 'com.alibaba', name: 'fastjson', version: '1.2.29'
    compile group: 'org.apache.curator', name: 'curator-x-discovery', version: '2.11.1'
// https://mvnrepository.com/artifact/org.slf4j/log4j-over-slf4j
compile group: 'org.slf4j', name: 'log4j-over-slf4j', version: '1.7.25'
// https://mvnrepository.com/artifact/ch.qos.logback/logback-classic
compile group: 'ch.qos.logback', name: 'logback-classic', version: '1.2.3'


    compile group: 'com.github.mpusher', name: 'mpush-api', version: '0.7.1'
    //compile (group: 'com.github.mpusher', name: 'mpush-cache', version: '0.7.1')
    //{
//		exclude group: 'ch.qos.logback'
  //  }
    compile group: 'com.github.mpusher', name: 'mpush-client', version: '0.7.1'
    compile group: 'com.github.mpusher', name: 'mpush-common', version: '0.7.1'
    compile group: 'com.github.mpusher', name: 'mpush-core', version: '0.7.1'
    compile group: 'com.github.mpusher', name: 'mpush-monitor', version: '0.7.1'
    compile group: 'com.github.mpusher', name: 'mpush-netty', version: '0.7.1'
   // compile group: 'com.github.mpusher', name: 'mpush-tools', version: '0.7.1'
    compile group: 'com.github.mpusher', name: 'mpush-zk', version: '0.7.1'
   //compile group: 'org.slf4j', name: 'slf4j-api', version: '1.7.25'



// https://mvnrepository.com/artifact/com.zaxxer/HikariCP
  compile group: 'com.zaxxer', name: 'HikariCP', version: '2.6.1'


    compile fileTree(dir: 'local_lib', include: '*.jar')
    compile fileTree(dir: 'local_lib/rule_lib', include: '*.jar')


configurations.all {
   exclude group: 'log4j'
   exclude group: 'org.slf4j', module: 'slf4j-log4j12'
}    
//	compile group: 'org.json', name: 'json', version: '20160212'
//	compile group: 'org.apache.activemq', name: 'activemq-core', version: '5.7.0'
//	compile group: 'dom4j', name: 'dom4j', version: '1.6.1'
//	compile group: 'javax.jms', name: 'jms', version: '1.1'
//	compile group: 'jfree', name: 'jfreechart', version: '1.0.13'
//  compile group: 'jcs', name: 'jcs', version: '1.3'
//	compile group: 'jcifs', name: 'jcifs', version: '1.3.17'
//  compile group: 'net.sourceforge', name: 'mpxj', version: '4.5.0-rc1'
//	compile group: 'io.netty', name: 'netty-all', version: '5.0.0.Alpha2'
//	compile group: 'xml-apis', name: 'xml-apis', version: '2.10.0' 
//	compile group: 'xml-apis', name: 'xml-apis', version: '1.4.01'
//	https://mvnrepository.com/artifact/org.tmatesoft.svnkit/svnkit
//	Declare the dependency for your favourite test framework you want to use in your tests.
//	TestNG is also supported by the Gradle Test task. Just change the
//	testCompile dependency to testCompile 'org.testng:testng:6.8.1' and add
//	'test.useTestNG()' to your build script.
	
	
	//testCompile 'junit:junit:4.12'
	
	
/**
	def tomcatVersion = '8.0.35'
    tomcat    "org.apache.tomcat.embed:tomcat-embed-core:${tomcatVersion}",
            "org.apache.tomcat.embed:tomcat-embed-logging-juli:${tomcatVersion}",
            "org.apache.tomcat.embed:tomcat-embed-jasper:${tomcatVersion}"
	
**/	

}

task copyJars(type:Sync){  
    from configurations.runtime  
  //  into '/Users/pengfei/Documents/project/rds_lib'  
      into 'src/main/webapp/WEB-INF/lib' 
}

task run(type: JavaExec, dependsOn: classes) {
    main = 'pax.BmsGlobal'
    //args = "The rain in Spain falls mainly in the plain".split().toList()
    classpath = sourceSets.main.runtimeClasspath
 }
task run2(type: JavaExec, dependsOn: classes) {
    main = 'pax.actionhandler.test.TestAH'
    //args = "The rain in Spain falls mainly in the plain".split().toList()
    classpath = sourceSets.main.runtimeClasspath
}

task copyweb(type:Sync){
        from 'src/main/webapp'
        into 'build/output'
	exclude '**/logs/*'
	//exclude 'src/main/webapp/*logs*'
        //exclude 'src/main/webapp/logs/**'
        //exclude '**/logs/*log'
        //exclude '**/logs/*log*'
}

task copyotaweb(type:Copy){
        from 'src/main/webapp'
        into 'build/ota-output'
        exclude '**/logs/*'
        //exclude 'src/main/webapp/*logs*'
        //exclude 'src/main/webapp/logs/**'
        //exclude '**/logs/*log'
        //exclude '**/logs/*log*'
}

task copyI18n(type:Copy){
    from 'src/main/webapp/WEB-INF/classes/resources/pax'
    into 'src/main/java/resources/pax'
    exclude '**/logs/*'
    //exclude 'src/main/webapp/*logs*'
    //exclude 'src/main/webapp/logs/**'
    //exclude '**/logs/*log'
    //exclude '**/logs/*log*'
}



